<html>
<head>
  <title>JD-asm</title>
</head>
<body onload="init();" onresize="sc1();">
<script type="text/javascript" src="swingIO/UI.js"></script>
<script>
  /*------------------------------------------------------------
  This is a web based version of JDisassembly originally designed to run in Java.
  See https://github.com/Recoskie/JDisassembly/blob/master/app.java
  ------------------------------------------------------------*/
  
  var file = null, fr = new FileReader();
  var h = null;
  
  function init()
  {
    h = new VHex("vhex", false, sc);
    
    h.hide(true);
  }
  
  function Open( f )
  {
    file = f.files[0];
    
    h.hide(false);
    
    h.setSize(file.size);
    
    fr.readAsArrayBuffer(file.slice(0, h.getRows() * 16));
  }
  
  function sc()
  {
    var pos = h.getPos(); pos = (pos < 0 ? 0 : pos) * 16;
    var row = h.getRows() * 16;
    
    fr.readAsArrayBuffer(file.slice(pos, pos + row));
  }
  
  fr.onload = function() { h.update( new Uint8Array(fr.result) ); }
        
  fr.onerror = function() { alert("error"); }
</script>
<input type="file" id="file" onchange="Open(this);">
<iframe style='width:100%;height:100%;' id="vhex"></iframe>
</body>
</html>